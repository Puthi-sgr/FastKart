import{Af as L,B as n,Bf as E,E as i,Ef as N,Hd as D,Pb as P,Rb as p,Sb as d,Ub as f,a as j,b as x,dd as l,h as a,rb as m,y as c}from"./chunk-HAPQGES3.js";var $=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Notification] Get";let o=t;return o})(),T=(()=>{let t=class t{constructor(){}};t.type="[Notification] Mark As Read";let o=t;return o})(),G=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Notification] Delete";let o=t;return o})();var h,b=(h=class{constructor(t){this.notificationService=t}static notification(t){return t.notification.data}getNotification(t,r){return this.notificationService.getNotifications(r?.payload).pipe(c({next:e=>{t.patchState({notification:{data:e.data,total:e?.total?e?.total:e.data.length}})},error:e=>{throw new Error(e?.error?.message)}}))}markAsRead(t){return this.notificationService.markAsReadNotification().pipe(c({next:r=>{t.patchState({notification:{data:r.data,total:r?.total?r?.total:r.data.length}})},error:r=>{throw new Error(r?.error?.message)}}))}delete(t,{id:r}){return this.notificationService.deleteNotification(r).pipe(c({next:()=>{let e=t.getState(),s=e.notification.data.filter(Y=>Y.id!==r);t.patchState(x(j({},e),{notification:{data:s,total:e.notification.total-1}}))},complete:()=>{this.notificationService.showSuccess("Notification Deleted Successfully.")},error:e=>{throw new Error(e?.error?.message)}}))}},h.\u0275fac=function(r){return new(r||h)(i(D))},h.\u0275prov=n({token:h,factory:h.\u0275fac}),h);a([p($)],b.prototype,"getNotification",null);a([p(T)],b.prototype,"markAsRead",null);a([p(G)],b.prototype,"delete",null);a([f()],b,"notification",null);b=a([d({name:"notification",defaults:{notification:{data:[],total:0}}})],b);var C=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Wallet] Transaction Get";let o=t;return o})();var H=(()=>{let t=class t{constructor(e){this.http=e}getUserTransaction(e){return this.http.get(`${l.URL}/wallet/consumer`,{params:e})}};t.\u0275fac=function(s){return new(s||t)(i(m))},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var w,A=(w=class{constructor(t){this.walletService=t}static wallet(t){return t.wallet}getUserTransations(t,{payload:r}){return this.walletService.getUserTransaction(r).pipe(c({next:e=>{t.patchState({wallet:{balance:e?.balance,transactions:{data:e?.transactions?.data,total:e?.transactions?.total?e?.transactions?.total:e?.transactions?.data?.length}}})},error:e=>{throw t.patchState({wallet:{balance:0,transactions:{data:[],total:0}}}),new Error(e?.error?.message)}}))}},w.\u0275fac=function(r){return new(r||w)(i(H))},w.\u0275prov=n({token:w,factory:w.\u0275fac}),w);a([p(C)],A.prototype,"getUserTransations",null);a([f()],A,"wallet",null);A=a([d({name:"wallet",defaults:{wallet:{balance:0,transactions:{data:[],total:0}}}})],A);var q=(()=>{let t=class t{};t.type="[Payment Details] Get";let o=t;return o})(),z=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Payment Details] Post";let o=t;return o})();var O=(()=>{let t=class t{constructor(e){this.http=e}getPaymentAccount(){return this.http.get(`${l.URL}/paymentAccount`)}updatePaymentAccount(e){return this.http.post(`${l.URL}/paymentAccount`,e)}};t.\u0275fac=function(s){return new(s||t)(i(m))},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var y,R=(y=class{constructor(t,r){this.notificationService=t,this.PaymentDetailsService=r}static paymentDetails(t){return t.paymentDetails}getPaymentDetails(t){return this.PaymentDetailsService.getPaymentAccount().pipe(c({next:r=>{t.patchState({paymentDetails:r})},error:r=>{throw new Error(r?.error?.message)}}))}updatePaymentDetails(t,r){return this.PaymentDetailsService.updatePaymentAccount(r.payload).pipe(c({next:e=>{if(typeof e=="object"){let s=t.getState();t.patchState(x(j({},s),{paymentDetails:e}))}},complete:()=>{this.notificationService.showSuccess("Account Details Updated Successfully.")},error:e=>{throw new Error(e?.error?.message)}}))}},y.\u0275fac=function(r){return new(r||y)(i(D),i(O))},y.\u0275prov=n({token:y,factory:y.\u0275fac}),y);a([p(q)],R.prototype,"getPaymentDetails",null);a([p(z)],R.prototype,"updatePaymentDetails",null);a([f()],R,"paymentDetails",null);R=a([d({name:"paymentDetails",defaults:{paymentDetails:null}})],R);var V=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Point] Transaction Get";let o=t;return o})();var W=(()=>{let t=class t{constructor(e){this.http=e}getUserTransaction(e){return this.http.get(`${l.URL}/points/consumer`,{params:e})}};t.\u0275fac=function(s){return new(s||t)(i(m))},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var S,F=(S=class{constructor(t){this.pointService=t}static point(t){return t.point}getUserTransaction(t,{payload:r}){return this.pointService.getUserTransaction(r).pipe(c({next:e=>{t.patchState({point:{balance:e?.balance,transactions:{data:e?.transactions?.data,total:e?.transactions?.total?e?.transactions?.total:e?.transactions?.data?.length}}})},error:e=>{throw t.patchState({point:{balance:0,transactions:{data:[],total:0}}}),new Error(e?.error?.message)}}))}},S.\u0275fac=function(r){return new(r||S)(i(W))},S.\u0275prov=n({token:S,factory:S.\u0275fac}),S);a([p(V)],F.prototype,"getUserTransaction",null);a([f()],F,"point",null);F=a([d({name:"point",defaults:{point:{balance:0,transactions:{data:[],total:0}}}})],F);var B=(()=>{let t=class t{constructor(e){this.http=e}getRefunds(e){return this.http.get(`${l.URL}/refund`,{params:e})}sendRefundRequest(e){return this.http.post(`${l.URL}/refund`,e)}updaterefundStatus(e,s){return this.http.put(`${l.URL}/refund/${e}`,{status:s})}};t.\u0275fac=function(s){return new(s||t)(i(m))},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var g,k=(g=class{constructor(t,r){this.refundService=t,this.store=r}static refund(t){return t.refund}getRefund(t,r){return this.refundService.getRefunds(r.payload).pipe(c({next:e=>{t.patchState({refund:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}sendRefundStatus(t,r){return this.refundService.sendRefundRequest(r.payload).pipe(c({next:e=>{if(typeof e=="object"){let s=t.getState();t.patchState(x(j({},s),{refund:{data:[...s.refund.data,e],total:s.refund.total}})),this.store.dispatch(new N(e.order_number))}},error:e=>{throw new Error(e?.error?.message)}}))}},g.\u0275fac=function(r){return new(r||g)(i(B),i(P))},g.\u0275prov=n({token:g,factory:g.\u0275fac}),g);a([p(L)],k.prototype,"getRefund",null);a([p(E)],k.prototype,"sendRefundStatus",null);a([f()],k,"refund",null);k=a([d({name:"refund",defaults:{refund:{data:[],total:0}}})],k);var J=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Download] Get";let o=t;return o})(),K=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Download] Files";let o=t;return o})(),Q=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Download] License";let o=t;return o})();var X=(()=>{let t=class t{constructor(e){this.http=e}downloads(e){return this.http.get(`${l.URL}/download`,{params:e})}downloadFiles(e){return this.http.post(`${l.URL}/download/zip/link`,{id:e})}downloadLicense(e){return this.http.post(`${l.URL}/download/key/link`,{id:e})}};t.\u0275fac=function(s){return new(s||t)(i(m))},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var v,I=(v=class{constructor(t){this.downloadService=t}static download(t){return t.download}downloads(t,r){return this.downloadService.downloads(r.payload).pipe(c({next:e=>{t.patchState({download:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}downloadFiles(t,r){return this.downloadService.downloadFiles(r.id).pipe(c({next:e=>{e&&e.download_link&&window.location.assign(e.download_link)},error:e=>{throw new Error(e?.error?.message)}}))}downloadLicense(t,r){return this.downloadService.downloadLicense(r.id).pipe(c({next:e=>{e&&e.download_link&&window.location.assign(e.download_link)},error:e=>{throw new Error(e?.error?.message)}}))}},v.\u0275fac=function(r){return new(r||v)(i(X))},v.\u0275prov=n({token:v,factory:v.\u0275fac}),v);a([p(J)],I.prototype,"downloads",null);a([p(K)],I.prototype,"downloadFiles",null);a([p(Q)],I.prototype,"downloadLicense",null);a([f()],I,"download",null);I=a([d({name:"download",defaults:{download:{data:[],total:0}}})],I);export{$ as a,T as b,b as c,C as d,A as e,q as f,z as g,R as h,V as i,F as j,k,J as l,K as m,Q as n,I as o};
