import{B as c,Ce as $,E as n,Ge as F,Hd as Q,Ne as E,Pb as U,Rb as u,Sb as y,Ub as m,a as h,b as f,cc as I,dd as d,h as a,of as G,pf as B,qf as C,rb as j,sf as V,tf as H,uf as N,vf as D,y as l}from"./chunk-HAPQGES3.js";var ot=(()=>{let t=class t{constructor(e,r,s){this.store=e,this.router=r,this.authService=s}canActivate(e,r){return this.authService.redirectUrl=r.url,this.store.selectSnapshot(s=>s.auth&&s.auth.access_token)?(this.store.dispatch(new $).subscribe({complete:()=>!0}),!0):this.router.createUrlTree(["/auth/login"])}canActivateChild(e,r){return this.store.selectSnapshot(s=>s.auth&&s.auth.access_token)?((this.router.url.startsWith("/account")||this.router.url=="/checkout"||this.router.url=="/compare")&&this.router.navigate(["/"]),!1):!0}};t.\u0275fac=function(r){return new(r||t)(n(U),n(I),n(F))},t.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var T=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Store] Get";let i=t;return i})(),W=(()=>{let t=class t{constructor(e){this.slug=e}};t.type="[Store] Get By Slug";let i=t;return i})();var J=(()=>{let t=class t{constructor(e){this.http=e,this.skeletonLoader=!1}getStores(e){return this.http.get(`${d.URL}/store`,{params:e})}getStoreBySlug(e){return this.http.get(`${d.URL}/store/slug/${e}`)}};t.\u0275fac=function(r){return new(r||t)(n(j))},t.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var w,q=(w=class{constructor(t,o){this.storeService=t,this.router=o}static store(t){return t.store}static selectedStore(t){return t.selectedStore}getStores(t,o){return this.storeService.skeletonLoader=!0,this.storeService.getStores(o.payload).pipe(l({next:e=>{t.patchState({store:{data:e.data,total:e?.total?e?.total:e.data?.length}})},complete:()=>{this.storeService.skeletonLoader=!1},error:e=>{throw new Error(e?.error?.message)}}))}getStoreBySlug(t,{slug:o}){return this.storeService.getStoreBySlug(o).pipe(l({next:e=>{let r=t.getState();t.patchState(f(h({},r),{selectedStore:e}))},error:e=>{throw this.router.navigate(["/404"]),new Error(e?.error?.message)}}))}},w.\u0275fac=function(o){return new(o||w)(n(J),n(I))},w.\u0275prov=c({token:w,factory:w.\u0275fac}),w);a([u(T)],q.prototype,"getStores",null);a([u(W)],q.prototype,"getStoreBySlug",null);a([m()],q,"store",null);a([m()],q,"selectedStore",null);q=a([y({name:"store",defaults:{store:{data:[],total:0},selectedStore:null}})],q);var K=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Attribute] Get";let i=t;return i})(),O=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Attribute] Value Get";let i=t;return i})();var v,R=(v=class{constructor(t){this.attributeService=t}static attribute(t){return t.attribute}static attribute_value(t){return o=>o?t?.attribute_values.filter(e=>+e.attribute_id===o)?.map(e=>({label:e?.value,value:e?.id})):[]}getAttributes(t,o){return this.attributeService.skeletonLoader=!0,this.attributeService.getAttributes(o.payload).pipe(l({next:e=>{t.patchState({attribute:{data:e.data,total:e?.total?e?.total:e.data.length}})},complete:()=>{this.attributeService.skeletonLoader=!1},error:e=>{throw new Error(e?.error?.message)}}))}getAttributeValues(t,o){return this.attributeService.getAttributeValues(o.payload).pipe(l({next:e=>{let r=t.getState();t.patchState(f(h({},r),{attribute_values:e.data}))},error:e=>{throw new Error(e?.error?.message)}}))}},v.\u0275fac=function(o){return new(o||v)(n(E))},v.\u0275prov=c({token:v,factory:v.\u0275fac}),v);a([u(K)],R.prototype,"getAttributes",null);a([u(O)],R.prototype,"getAttributeValues",null);a([m()],R,"attribute",null);a([m()],R,"attribute_value",null);R=a([y({name:"attribute",defaults:{attribute:{data:[],total:0},attribute_values:[]}})],R);var P=(()=>{let t=class t{constructor(e){this.http=e,this.skeletonLoader=!1}getQuestionAnswers(e){return this.http.get(`${d.URL}/question-and-answer`,{params:e})}sendQuestion(e){return this.http.post(`${d.URL}/question-and-answer`,e)}updateQuestionAnswers(e,r){return this.http.put(`${d.URL}/question-and-answer/${e}`,r)}feedback(e){return this.http.post(`${d.URL}/question-and-answer/feedback`,e)}};t.\u0275fac=function(r){return new(r||t)(n(j))},t.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var S,A=(S=class{constructor(t){this.questionsAnswersService=t}static questionsAnswers(t){return t.question}getQuestionAnswers(t,o){return this.questionsAnswersService.skeletonLoader=!0,this.questionsAnswersService.getQuestionAnswers(o.slug).pipe(l({next:e=>{t.patchState({question:{data:e.data,total:e?.total?e?.total:e.data?.length}})},complete:()=>{this.questionsAnswersService.skeletonLoader=!1},error:e=>{throw new Error(e?.error?.message)}}))}sendQuestion(t,o){return this.questionsAnswersService.sendQuestion(o.payload).pipe(l({next:e=>{let r=t.getState();t.patchState(f(h({},r),{question:{data:[...r.question.data,e],total:r?.question.total+1}}))},error:e=>{throw new Error(e?.error?.message)}}))}update(t,{payload:o,id:e}){return this.questionsAnswersService.updateQuestionAnswers(e,o).pipe(l({next:r=>{if(typeof r=="object"){let s=t.getState(),p=[...s.question.data],b=p.findIndex(L=>L.id===e);p[b]=r,t.patchState(f(h({},s),{question:{data:p,total:s.question.total}}))}},error:r=>{throw new Error(r?.error?.message)}}))}Feedback(t,o){let e=t.getState(),r=[...e.question.data],s=r.findIndex(p=>Number(p.id)===Number(o.payload.question_and_answer_id));if(o.type==="liked"||o.type==="disliked"){let p=r[s].reaction,b=o.payload.reaction;p===b?(o.type==="liked"?r[s].total_likes-=1:r[s].total_dislikes-=1,r[s].reaction=null,o.payload.reaction=null):(p==="liked"?r[s].total_likes-=1:p==="disliked"&&(r[s].total_dislikes-=1),o.type==="liked"?r[s].total_likes+=1:r[s].total_dislikes+=1,r[s].reaction=b,o.payload.reaction=b)}return t.patchState(f(h({},e),{question:{data:r,total:e.question.total}})),this.questionsAnswersService.feedback(o.payload)}},S.\u0275fac=function(o){return new(o||S)(n(P))},S.\u0275prov=c({token:S,factory:S.\u0275fac}),S);a([u(V)],A.prototype,"getQuestionAnswers",null);a([u(H)],A.prototype,"sendQuestion",null);a([u(N)],A.prototype,"update",null);a([u(D)],A.prototype,"Feedback",null);a([m()],A,"questionsAnswers",null);A=a([y({name:"question",defaults:{question:{data:[],total:0}}})],A);var X=(()=>{let t=class t{constructor(e){this.http=e}getReview(e){return this.http.get(`${d.URL}/front/review`,{params:e})}sendReview(e){return this.http.post(`${d.URL}/review`,e)}updateReview(e,r){return this.http.put(`${d.URL}/review/${e}`,r)}};t.\u0275fac=function(r){return new(r||t)(n(j))},t.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var g,x=(g=class{constructor(t,o){this.notificationService=t,this.reviewsService=o}static review(t){return t.review}getReview(t,o){return this.reviewsService.getReview(o.payload).pipe(l({next:e=>{t.patchState({review:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}sendReview(t,o){return this.reviewsService.sendReview(o.payload).pipe(l({next:e=>{let r=t.getState();t.patchState(f(h({},r),{review:{data:[...r.review.data,e],total:r?.review.total+1}}))},complete:()=>{this.notificationService.showSuccess("Review Send Successfully.")},error:e=>{throw new Error(e?.error?.message)}}))}update(t,{payload:o,id:e}){return this.reviewsService.updateReview(e,o).pipe(l({next:r=>{if(typeof r=="object"){let s=t.getState(),p=[...s.review.data],b=p.findIndex(L=>L.id===e);p[b]=r,t.patchState(f(h({},s),{review:{data:p,total:s.review.total}}))}},complete:()=>{this.notificationService.showSuccess("Review Updated Successfully.")},error:r=>{throw new Error(r?.error?.message)}}))}},g.\u0275fac=function(o){return new(o||g)(n(Q),n(X))},g.\u0275prov=c({token:g,factory:g.\u0275fac}),g);a([u(G)],x.prototype,"getReview",null);a([u(B)],x.prototype,"sendReview",null);a([u(C)],x.prototype,"update",null);a([m()],x,"review",null);x=a([y({name:"review",defaults:{review:{data:[],total:0}}})],x);export{ot as a,T as b,W as c,J as d,q as e,K as f,R as g,P as h,A as i,x as j};
