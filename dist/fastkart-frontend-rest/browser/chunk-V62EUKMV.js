import{f as D}from"./chunk-RLXU3HOT.js";import{B as l,Bd as M,E as r,Rb as f,Sb as B,Tb as c,Ub as y,Yb as v,a as h,b as p,ca as T,cc as $,dd as b,fd as I,h as i,p as O,qd as j,rb as S,re as F,vd as x,xb as C,y as _,yb as w}from"./chunk-HAPQGES3.js";var E=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Brand] Get";let s=t;return s})(),P=(()=>{let t=class t{constructor(e){this.slug=e}};t.type="[Brand] Get Brand By Slug";let s=t;return s})();var L=(()=>{let t=class t{constructor(e){this.http=e}getBrands(e){return this.http.get(`${b.URL}/brand`,{params:e})}getBrandBySlug(e){return this.http.get(`${b.URL}/brand/slug/${e}`)}};t.\u0275fac=function(d){return new(d||t)(r(S))},t.\u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"});let s=t;return s})();var a,m=(a=class{constructor(t){this.brandService=t}static brand(t){return t.brand}static selectedBrand(t){return t.selectedBrand}getBrands(t,o){return this.brandService.getBrands(o.payload).pipe(_({next:e=>{t.patchState({brand:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}getBrandBySlug(t,o){return this.brandService.getBrandBySlug(o.slug).pipe(_({next:e=>{let d=t.getState();t.patchState(p(h({},d),{selectedBrand:e}))},error:e=>{throw new Error(e?.error?.message)}}))}},a.\u0275fac=function(o){return new(o||a)(r(L))},a.\u0275prov=l({token:a,factory:a.\u0275fac}),a);i([f(E)],m.prototype,"getBrands",null);i([f(P)],m.prototype,"getBrandBySlug",null);i([y()],m,"brand",null);i([y()],m,"selectedBrand",null);m=i([B({name:"brand",defaults:{brand:{data:[],total:0},selectedBrand:null}})],m);var g=class g{constructor(t,o,e,d){this.meta=t,this.router=o,this.titleService=e,this.ngZone=d,this.currentMessageIndex=0,this.delay=1e3,this.isTabInFocus=!0,this.scoContent={},this.router.events.pipe(O(u=>u instanceof v)).subscribe(u=>{this.path=u.url,this.updateSeo(this.path)}),this.fetchData()}fetchData(){this.setting$.subscribe(t=>this.setting=t),this.product$.subscribe(t=>this.product=t),this.blog$.subscribe(t=>this.blog=t),this.page$.subscribe(t=>this.page=t),this.brand$.subscribe(t=>this.brand=t),this.category$.subscribe(t=>this.category=t),this.themeOption$.subscribe(t=>{this.themeOption=t})}updateSeo(t){t.includes("product")?(this.product&&(this.scoContent={url:window.location.href,og_title:this.product.meta_title||this.themeOption?.seo?.meta_title,og_description:this.product.meta_description||this.themeOption?.seo?.meta_description,og_image:this.product.product_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url}),this.customSCO()):t.includes("blog")?this.blog&&(this.scoContent=p(h({},this.scoContent),{url:window.location.href,og_title:this.blog?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.blog?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.blog?.blog_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url}),this.customSCO()):t.includes("page")?(this.page&&(this.scoContent=p(h({},this.scoContent),{url:window.location.href,og_title:this.page?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.page?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.page?.page_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url})),this.customSCO()):t.includes("brand")?(this.brand&&(this.scoContent=p(h({},this.scoContent),{url:window.location.href,og_title:this.brand?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.brand?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.brand?.brand_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url})),this.customSCO()):t.includes("category")?(this.category&&(this.scoContent=p(h({},this.scoContent),{url:window.location.href,og_title:this.category?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.category?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.category?.category_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url})),this.customSCO()):this.updateDefaultSeo()}updateDefaultSeo(){if(this.meta.updateTag({name:"title",content:this.themeOption?.seo?.meta_title}),this.meta.updateTag({name:"description",content:this.themeOption?.seo?.meta_description}),this.meta.updateTag({property:"og:type",content:"website"}),this.meta.updateTag({property:"og:url",content:this.scoContent.url}),this.meta.updateTag({property:"og:title",content:this.themeOption?.seo?.meta_title}),this.meta.updateTag({property:"og:description",content:this.themeOption?.seo?.meta_description}),this.meta.updateTag({property:"og:image",content:this.scoContent.og_image}),this.meta.updateTag({property:"twitter:card",content:"summary_large_image"}),this.meta.updateTag({property:"twitter:url",content:this.scoContent.url}),this.meta.updateTag({property:"twitter:title",content:this.themeOption?.seo?.meta_title}),this.meta.updateTag({property:"twitter:description",content:this.themeOption?.seo?.meta_description}),this.meta.updateTag({property:"twitter:image",content:this.scoContent.og_image}),this.themeOption?.general&&this.themeOption?.general?.exit_tagline_enable)document.addEventListener("visibilitychange",()=>{this.messages=this.themeOption.general.taglines,this.ngZone.run(()=>{if(this.isTabInFocus=!document.hidden,this.isTabInFocus)return clearTimeout(this.timeoutId),this.titleService.setTitle(this.themeOption?.general?.site_title&&this.themeOption?.general?.site_tagline?`${this.themeOption?.general?.site_title} | ${this.themeOption?.general?.site_tagline}`:"");this.updateMessage()})}),this.scoContent=p(h({},this.scoContent),{url:window.location.href,og_title:this.themeOption?.seo?.meta_title,og_description:this.themeOption?.seo?.meta_description,og_image:this.themeOption?.seo?.og_image?.original_url}),this.customSCO();else return this.titleService.setTitle(this.themeOption?.general?.site_title&&this.themeOption?.general?.site_tagline?`${this.themeOption?.general?.site_title} | ${this.themeOption?.general?.site_tagline}`:"")}customSCO(){let t=this.scoContent.og_title,o=this.scoContent.og_description;this.titleService.setTitle(t),this.meta.updateTag({name:"title",content:t}),this.meta.updateTag({name:"description",content:o}),this.meta.updateTag({property:"og:type",content:"website"}),this.meta.updateTag({property:"og:url",content:this.scoContent.url}),this.meta.updateTag({property:"og:title",content:t}),this.meta.updateTag({property:"og:description",content:o}),this.meta.updateTag({property:"og:image",content:this.scoContent.og_image}),this.meta.updateTag({property:"twitter:card",content:"summary_large_image"}),this.meta.updateTag({property:"twitter:url",content:this.scoContent.url}),this.meta.updateTag({property:"twitter:title",content:t}),this.meta.updateTag({property:"twitter:description",content:o}),this.meta.updateTag({property:"twitter:image",content:this.scoContent.og_image})}updateMessage(){clearTimeout(this.timeoutId),this.currentMessage=this.messages[this.currentMessageIndex],this.titleService.setTitle(this.currentMessage),this.currentMessageIndex=(this.currentMessageIndex+1)%this.messages.length,this.timeoutId=setTimeout(()=>{this.updateMessage()},this.delay)}ngOnDestroy(){clearTimeout(this.timeoutId)}};g.\u0275fac=function(o){return new(o||g)(r(C),r($),r(w),r(T))},g.\u0275prov=l({token:g,factory:g.\u0275fac,providedIn:"root"});var n=g;i([c(I.themeOptions)],n.prototype,"themeOption$",void 0);i([c(M.setting)],n.prototype,"setting$",void 0);i([c(j.selectedProduct)],n.prototype,"product$",void 0);i([c(x.selectedBlog)],n.prototype,"blog$",void 0);i([c(m.selectedBrand)],n.prototype,"brand$",void 0);i([c(D.selectedPage)],n.prototype,"page$",void 0);i([c(F.selectedCategory)],n.prototype,"category$",void 0);export{E as a,P as b,m as c,n as d};
